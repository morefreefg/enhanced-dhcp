<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced DHCP Manager</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåê</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <h1>üåê Enhanced DHCP Manager</h1>
            <p>Manage DHCP settings and device assignments</p>
        </header>

        <nav class="tabs">
            <button class="tab-button active" data-tab="overview">üìä Overview</button>
            <button class="tab-button" data-tab="devices">üíª Devices</button>
            <button class="tab-button" data-tab="tags">üè∑Ô∏è Tags</button>
        </nav>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üè∑Ô∏è</div>
                    <div class="stat-value" id="total-tags">-</div>
                    <div class="stat-label">DHCP Tags</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üíª</div>
                    <div class="stat-value" id="total-devices">-</div>
                    <div class="stat-label">Total Devices</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üü¢</div>
                    <div class="stat-value" id="online-devices">-</div>
                    <div class="stat-label">Online Devices</div>
                </div>
            </div>

            <div class="section">
                <h2>üîó Current DHCP Leases</h2>
                <div class="table-container">
                    <table id="leases-table">
                        <thead>
                            <tr>
                                <th>Hostname</th>
                                <th>IP Address</th>
                                <th>MAC Address</th>
                                <th>Lease Time</th>
                                <th>DHCP Tag</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="5" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section">
                <h2>üè∑Ô∏è Tags Summary</h2>
                <div class="table-container">
                    <table id="tags-summary-table">
                        <thead>
                            <tr>
                                <th>Tag Name</th>
                                <th>Gateway</th>
                                <th>DNS Servers</th>
                                <th>Devices Using</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="4" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Devices Tab -->
        <div id="devices" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>üíª Device Management</h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" id="refresh-devices">üîÑ Refresh</button>
                        <button class="btn btn-primary" id="discover-devices">üîç Auto Discover</button>
                    </div>
                </div>
                
                <div class="filters">
                    <input type="text" id="device-search" placeholder="üîç Search devices..." class="search-input">
                    <select id="device-filter" class="filter-select">
                        <option value="">All Devices</option>
                        <option value="static">Static Only</option>
                        <option value="lease">DHCP Leases</option>
                        <option value="arp">ARP Only</option>
                    </select>
                </div>

                <div class="table-container">
                    <table id="devices-table">
                        <thead>
                            <tr>
                                <th>Device</th>
                                <th>MAC Address</th>
                                <th>IP Address</th>
                                <th>Status</th>
                                <th>DHCP Tag</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="6" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Quick Assignment Panel -->
            <div class="section" id="quick-assign-panel" style="display: none;">
                <h3>‚ö° Quick Tag Assignment</h3>
                <div class="quick-assign-form">
                    <div class="form-group">
                        <label>Device:</label>
                        <span id="quick-assign-device">-</span>
                    </div>
                    <div class="form-group">
                        <label for="quick-assign-tag">DHCP Tag:</label>
                        <select id="quick-assign-tag" class="form-control">
                            <option value="">Loading...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quick-assign-name">Device Name:</label>
                        <input type="text" id="quick-assign-name" class="form-control" placeholder="Enter device name">
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="apply-tag-btn">‚úÖ Apply Tag</button>
                        <button class="btn btn-secondary" id="cancel-assign-btn">‚ùå Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tags Tab -->
        <div id="tags" class="tab-content">
            <div class="section">
                <div class="section-header">
                    <h2>üè∑Ô∏è DHCP Tags Management</h2>
                    <button class="btn btn-primary" id="create-tag-btn">‚ûï Create Tag</button>
                </div>

                <div class="table-container">
                    <table id="tags-table">
                        <thead>
                            <tr>
                                <th>Tag Name</th>
                                <th>Gateway</th>
                                <th>DNS Servers</th>
                                <th>Description</th>
                                <th>Devices</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="6" class="loading">Loading...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Create Tag Form -->
            <div class="section" id="create-tag-form" style="display: none;">
                <h3>‚ûï Create New DHCP Tag</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="tag-name">Tag Name*:</label>
                        <input type="text" id="tag-name" class="form-control" 
                               placeholder="e.g., guest_network" pattern="[a-zA-Z0-9_-]{2,32}" required>
                        <small>2-32 characters, letters, numbers, underscore, hyphen only</small>
                    </div>
                    <div class="form-group">
                        <label for="tag-gateway">Gateway IP:</label>
                        <input type="text" id="tag-gateway" class="form-control" 
                               placeholder="192.168.1.1" pattern="^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$">
                    </div>
                    <div class="form-group">
                        <label for="tag-dns">DNS Servers:</label>
                        <input type="text" id="tag-dns" class="form-control" 
                               placeholder="8.8.8.8,8.8.4.4">
                        <small>Comma-separated IP addresses</small>
                    </div>
                    <div class="form-group">
                        <label for="tag-description">Description:</label>
                        <input type="text" id="tag-description" class="form-control" 
                               placeholder="Optional description">
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" id="save-tag-btn">üíæ Create Tag</button>
                    <button class="btn btn-secondary" id="cancel-tag-btn">‚ùå Cancel</button>
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="status-messages"></div>

        <!-- Loading Modal -->
        <div id="loading-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="spinner"></div>
                <p>Processing...</p>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirm-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3 id="confirm-title">Confirm Action</h3>
                <p id="confirm-message">Are you sure?</p>
                <div class="modal-actions">
                    <button class="btn btn-danger" id="confirm-yes">Yes</button>
                    <button class="btn btn-secondary" id="confirm-no">No</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Enhanced DHCP Manager v2.0 - HTML Edition | 
           <span id="last-update">Last updated: Never</span>
        </p>
    </footer>

    <script src="script.js"></script>
</body>
</html>